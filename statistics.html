<!DOCTYPE html>
<html lang="en-US">

<head>
    <title>Statistics | METelehealth</title>
    <link rel="shortcut icon" type="image/jpg" href="images/favicon.png"/>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/statistics.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script src="https://kit.fontawesome.com/cf459a696d.js" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
</head>

<body>
    <div class="header">
        <p>If you are experiencing COVID-19 <a href="symptoms.html" style="color: white;"><b>symptoms</b></a>, please call <a href="contact.html" style="color: white;"><b>1-800-123-4567</b></a> or email <a style="color: white;" href="mailto:contact@metelehealth.com"><b>contact@metelehealth.com</b></a></p>
    </div>

    <div>
        <a href="home.html" style="float:left; position:absolute; padding-left: 5%; padding-top: 0.4%;"><img class="logo" src="images\logo.png"></a>
        <div class="navbar">
        <a href="contact.html"><i class="fa fa-fw fa-envelope"></i> Contact</a>
            <div class="dropdown">
                <a href="careers.html"><i class="fas fa-user-md"></i> Careers</a>
                <div class="dropdown-content" style="min-width: 180px;">
                        <a href="careers.html" style="text-align: center;"><i class="fas fa-user-md"></i> Careers</a>
                        <a href="jobs.html" style="text-align: left;"><i class="fas fa-suitcase"></i> Jobs</a>
                        <a href="internships.html" style="text-align: left;"><i class="fas fa-user-nurse"></i> Internships</a>
                        <a href="doctors.html" style="text-align: left;"><i class="fas fa-stethoscope"></i> Doctors</a>
                </div>
            </div>
            <div class="dropdown">
                <a style="border-bottom: 3px solid rgb(23, 70, 143);" href="covid.html"><i class="fa fa-fw fa-shield-virus"></i> COVID-19</a>
                <div class="dropdown-content" style="min-width: 206px;">
                        <a href="covid.html" style="text-align: center;"><i class="fa fa-fw fa-shield-virus"></i> COVID-19</a>
                        <a href="vaccinations.html" style="text-align: left;"><i class="fas fa-syringe"></i> Vaccinations</a>
                        <a href="testing-centers.html" style="text-align: left;"><i class="fas fa-vial"></i> Testing Centers</a>
                        <a href="statistics.html" style="text-align: left;"><i class="far fa-chart-bar"></i> Statistics</a>
                        <a href="guidelines.html" style="text-align: left;"><i class="fas fa-head-side-mask"></i> Guidelines</a>
                        <a href="symptoms.html" style="text-align: left;"><i class="fas fa-box-tissue"></i> Symptoms</a>
                        <a href="questionnaire.html" style="text-align: left;"><i class="fas fa-diagnoses"></i> Questionnaire</a>
                </div>
            </div>
            <div class="dropdown">
                <a href="services.html"><i class="fa fa-fw fa-user"></i> Services</a>
                    <div class="dropdown-content" style="min-width: 191px;">
                        <a href="services.html" style="text-align: center;"><i class="fa fa-fw fa-user"></i> Services</a>
                        <a href="personal-care.html" style="text-align: left;"><i class="fas fa-hand-holding-medical"></i> Personal Care</a>
                        <a href="chatbot.html" style="text-align: left;"><i class="fas fa-robot"></i> ChatBot</a>
                        <a href="forms.html" style="text-align: left;"><i class="fas fa-file-alt"></i> Forms</a>
                    </div>
            </div>
            <a class="active" href="home.html"><i class="fa fa-fw fa-home"></i> Home</a>
        </div>
    </div>

    <div class="title">
        <p><b>COVID-19 Statistics</b></p>
    </div>

    <div class="stat-container">
        <div class="card" style="margin: auto;">
            <div class="card-container">
                <div>
                    <p style="font-size: larger; margin-bottom: 0;"><b>New Jersey Statistics</b></p>
                    <p style="font-size:small; margin-top: 0; margin-bottom: 0;">Last Updated: <span id="njDate"></span></p><br><br>
                    <div style="float: right;" id="njdonutchart" style="width: 60%; height: 300px;"></div>
                    <p style="margin-top: 1%;">Population: <span id="njPopulation"></span></p>
                    <p>Overall Risk Factor: <span id="njRiskFactor" style="color: red;"></span> (Out of 4, learn more <a href="https://www.cdc.gov/coronavirus/2019-ncov/travelers/how-level-is-determined.html">here</a>)</p>
                    <p>Daily New Cases: <span id="njNewCases"></span></p>
                    <p>Daily New Deaths: <span id="njNewDeaths" style="color: red;"></span></p>
                    <p>Case Density: <span id="njCaseDensity"></span> (average number of cases per 100k population)</p>
                    <p><b>Hospital Beds</b></p>
                    <div style="float: right;" id="njpiechart" style="width: 60%; height: 300px;"></div>
                    <p>&emsp;Capacity: <span id="njHBCapacity"></span></p>
                    <p>&emsp;COVID Usage: <span id="njHBCovidUse"></span></p>
                    <p>&emsp;Total Usage: <span id="njHBTotalUse"></span></p>
                    <p><b>Intensive Care Units</b></p>
                    <p>&emsp;Capacity: <span id="njICUCapacity"></span></p>
                    <p>&emsp;COVID Usage: <span id="njICUCovidUse"></span></p>
                    <p>&emsp;Total Usage: <span id="njICUTotalUse"></span></p>
                </div>
                <div id="njbarchart"></div>
            </div>
        </div>
    </div>

    <div class="stat-container">
        <div class="card" style="margin: auto;">
            <div class="card-container">
                <div>
                    <p style="font-size: larger; margin-bottom: 0;"><b>National Statistics</b></p>
                    <p style="font-size:small; margin-top: 0; margin-bottom: 0;">Last Updated: <span id="natDate"></span></p><br><br>
                    <div style="float: right;" id="natdonutchart" style="width: 60%; height: 300px;"></div>
                    <p style="margin-top: 1%;">Population: <span id="natPopulation"></span></p>
                    <p>Overall Risk Factor: <span style="color: red;">3</span> (Out of 4, learn more <a href="https://www.cdc.gov/coronavirus/2019-ncov/travelers/how-level-is-determined.html">here</a>)</p>
                    <p>Daily New Cases: <span id="natNewCases"></span></p>
                    <p>Daily New Deaths: <span id="natNewDeaths" style="color: red;"></span></p>
                    <p><b>Hospital Beds</b></p>
                    <p>&emsp;Capacity: <span id="natHBCapacity"></span></p>
                    <p>&emsp;COVID Usage: <span id="natHBCovidUse"></span></p>
                    <div style="float: right;" id="natpiechart" style="width: 60%; height: 300px;"></div>
                    <p>&emsp;Total Usage: <span id="natHBTotalUse"></span></p>
                    <p><b>Intensive Care Units</b></p>
                    <p>&emsp;Capacity: <span id="natICUCapacity"></span></p>
                    <p>&emsp;COVID Usage: <span id="natICUCovidUse"></span></p>
                    <p>&emsp;Total Usage: <span id="natICUTotalUse"></span></p>
                </div>
                <div id="natbarchart"></div>
            </div>
        </div>
    </div>

    <div style="margin: auto;">
        <center><p style="left: 50%; color: white;">Data provided by Covid Act Now API (<a style="color:rgb(134, 157, 194);" href="https://covidactnow.org/?s=1695622">https://covidactnow.org/?s=1695622</a>)</p></center>
    </div>

    <div class="footer">
        <h1>Quick Links</h1>
        <ul class="footerlinks">
            <li><a href="personal-care.html">Personal Care</a></li>
            <li><a href="chatbot.html">ChatBot</a></li>
            <li><a href="forms.html">Forms</a></li>
            <li><a href="covid.html">COVID-19</a></li>
            <li><a href="careers.html">Careers</a></li>
            <li><a href="contact.html">Contact</a></li>
        </ul>
        <a href="#"><i class="far fa-envelope" style="font-size:x-large; padding-left: 10px; padding-right: 10px;"></i></a>
        <a href="#"><i class="fab fa-instagram" style="font-size:x-large; padding-left: 10px; padding-right: 10px;"></i></a>
        <a href="#"><i class="fab fa-facebook-f" style="font-size:x-large; padding-left: 10px; padding-right: 10px;"></i></a>
        <hr style="width: 80%;">
        <a href="home.html"><img style="padding-top: 10px;" width="250px" height="60px" src="images\logo-filled.png"></a>
        <p>Â©2021 METelehealth</p>
    </div>

    <script>
        //NJ Variables Begin
        var njLastUpdated;

        var njTCases;
        var njTContantTracers;
        var njTDeaths;

        var njHBCapacity;
        var njHBCovidUse;
        var njHBTotalUse;

        var njICUCapacity;
        var njICUCovidUse;
        var njICUTotalUse;

        var njPositiveTests;
        var njNegativeTests;

        var njNewCases;
        var njNewDeaths;
        
        var njVaccinationsCompleted;
        var njVaccinationsInitiated;
        var njVaccinesAdministered;
        var njVaccinesDistributed;

        var njCaseDensity;

        var njPopulation;

        var njRiskLevel;
        //NJ Variables End

        //National Variables Begin
        var i;

        var natTCases = 0;
        var natTContantTracers = 0;
        var natTDeaths = 0;

        var natHBCapacity = 0;
        var natHBCovidUse = 0;
        var natHBTotalUse = 0;

        var natICUCapacity = 0;
        var natICUCovidUse = 0;
        var natICUTotalUse = 0;

        var natPositiveTests = 0;
        var natNegativeTests = 0;

        var natNewCases = 0;
        var natNewDeaths = 0;
        
        var natVaccinationsCompleted = 0;
        var natVaccinationsInitiated = 0;
        var natVaccinesAdministered = 0;
        var natVaccinesDistributed = 0;

        var natPopulation = 0;
        //National Variables end
        
        const url = '14a1d52f3d3247d3a29a13d2d00e10aa'
        $.getJSON('https://api.covidactnow.org/v2/states.json?apiKey=' + url,
        function(data) {
            console.log(data);

            njLastUpdated = data[32].lastUpdatedDate;
            document.getElementById("njDate").innerHTML = njLastUpdated;
            document.getElementById("natDate").innerHTML = njLastUpdated;

            njTCases = data[32].actuals.cases;
            njTContantTracers = data[32].actuals.contactTracers;
            njTDeaths = data[32].actuals.deaths;

            njHBCapacity = data[32].actuals.hospitalBeds.capacity;
            document.getElementById("njHBCapacity").innerHTML = njHBCapacity.toLocaleString();
            njHBCovidUse = data[32].actuals.hospitalBeds.currentUsageCovid;
            document.getElementById("njHBCovidUse").innerHTML = njHBCapacity.toLocaleString();
            njHBTotalUse = data[32].actuals.hospitalBeds.currentUsageTotal;
            document.getElementById("njHBTotalUse").innerHTML = njHBTotalUse.toLocaleString();

            njICUCapacity = data[32].actuals.icuBeds.capacity;
            document.getElementById("njICUCapacity").innerHTML = njICUCapacity.toLocaleString();
            njICUCovidUse = data[32].actuals.icuBeds.currentUsageCovid;
            document.getElementById("njICUCovidUse").innerHTML = njICUCovidUse.toLocaleString();
            njICUTotalUse = data[32].actuals.icuBeds.currentUsageTotal;
            document.getElementById("njICUTotalUse").innerHTML = njICUTotalUse.toLocaleString();

            njPositiveTests = data[32].actuals.positiveTests;
            njNegativeTests = data[32].actuals.negativeTests;

            njNewCases = data[32].actuals.newCases;
            document.getElementById("njNewCases").innerHTML = njNewCases.toLocaleString();
            njNewDeaths = data[32].actuals.newDeaths;
            document.getElementById("njNewDeaths").innerHTML = njNewDeaths.toLocaleString();

            njVaccinationsCompleted = data[32].actuals.vaccinationsCompleted;
            njVaccinationsInitiated = data[32].actuals.vaccinationsInitiated;
            njVaccinesAdministered = data[32].actuals.vaccinesAdministered;
            njVaccinesDistributed = data[32].actuals.vaccinesDistributed;

            njCaseDensity = data[32].metrics.caseDensity;
            document.getElementById("njCaseDensity").innerHTML = njCaseDensity.toLocaleString();

            njPopulation = data[32].population;
            document.getElementById("njPopulation").innerHTML = njPopulation.toLocaleString();

            njRiskLevel = data[32].riskLevels.overall;
            document.getElementById("njRiskFactor").innerHTML = njRiskLevel.toLocaleString();

            for (i = 0; i < 53; i++) {
                var TCases = data[i].actuals.cases;
                natTCases = natTCases + TCases;
                var TContactTracers = data[i].actuals.contactTracers;
                natTContantTracers = natTContantTracers + TContactTracers;
                var TDeaths = data[i].actuals.deaths;
                natTDeaths = natTDeaths + TDeaths;
                
                var TPopulation = data[i].population;
                natPopulation = natPopulation + TPopulation;
                
                var TDailyCases = data[i].actuals.newCases;
                natNewCases = natNewCases + TDailyCases;
                var TDailyDeaths = data[i].actuals.newDeaths;
                natNewDeaths = natNewDeaths + TDailyDeaths;
                
                var THBCapacity = data[i].actuals.hospitalBeds.capacity;
                natHBCapacity = natHBCapacity + THBCapacity;
                var THBCovid = data[i].actuals.hospitalBeds.currentUsageCovid;
                natHBCovidUse = natHBCovidUse + THBCovid;
                var THBTotal = data[i].actuals.hospitalBeds.currentUsageTotal;
                natHBTotalUse = natHBTotalUse + THBTotal;

                var TICUCapacity = data[i].actuals.icuBeds.capacity;
                natICUCapacity = natICUCapacity + TICUCapacity;
                var TICUCovid = data[i].actuals.icuBeds.currentUsageCovid;
                natICUCovidUse = natICUCovidUse + TICUCovid;
                var TICUTotal = data[i].actuals.icuBeds.currentUsageTotal;
                natICUTotalUse = natICUTotalUse + TICUTotal;

                var TPositive = data[i].actuals.positiveTests;
                natPositiveTests = natPositiveTests + TPositive;
                var TNegative = data[i].actuals.negativeTests;
                natNegativeTests = natNegativeTests + TNegative;

                var TVacC = data[i].actuals.vaccinationsCompleted;
                natVaccinationsCompleted = natVaccinationsCompleted + TVacC;
                var TVacI = data[i].actuals.vaccinationsInitiated;
                natVaccinationsInitiated = natVaccinationsInitiated + TVacI;
                var TVacA = data[i].actuals.vaccinesAdministered;
                natVaccinesAdministered = natVaccinesAdministered + TVacA;
                var TVacD = data[i].actuals.vaccinesDistributed;
                natVaccinesDistributed = natVaccinesDistributed + TVacD;
                
            }

            document.getElementById("natPopulation").innerHTML = natPopulation.toLocaleString();
            document.getElementById("natNewCases").innerHTML = natNewCases.toLocaleString();
            document.getElementById("natNewDeaths").innerHTML = natNewDeaths.toLocaleString();
            document.getElementById("natHBCapacity").innerHTML = natHBCapacity.toLocaleString();
            document.getElementById("natHBCovidUse").innerHTML = natHBCovidUse.toLocaleString();
            document.getElementById("natHBTotalUse").innerHTML = natHBTotalUse.toLocaleString();
            document.getElementById("natICUCapacity").innerHTML = natICUCapacity.toLocaleString();
            document.getElementById("natICUCovidUse").innerHTML = natICUCovidUse.toLocaleString();
            document.getElementById("natICUTotalUse").innerHTML = natICUTotalUse.toLocaleString();
            
        })

    setTimeout(() => {console.log("Waiting for API"); }, 1000);
    google.charts.load('current', {'packages':['corechart']});
    google.charts.setOnLoadCallback(njdrawChart);
    google.charts.setOnLoadCallback(natdrawChart);
    google.charts.load('current', {packages: ['corechart', 'bar']});
    google.charts.setOnLoadCallback(njbarChart);
    google.charts.setOnLoadCallback(natbarChart);
    google.charts.load("current", {packages:["corechart"]});
    google.charts.setOnLoadCallback(njdonutchart);
    google.charts.setOnLoadCallback(natdonutchart);

    function njdrawChart() {
        var data = google.visualization.arrayToDataTable([
            ['Vaccines', 'Amount'],
            ['Vaccines Completed', njVaccinationsCompleted],
            ['Vaccines Initiated', njVaccinationsInitiated],
            ['Vaccines Administered',  njVaccinesAdministered],
            ['Vaccines Distributed', njVaccinesDistributed]
        ]);
    var options = {
        title: 'NJ Vaccination Amounts',
        is3D: true,
        slices: {
            0: { color: 'green' },
            1: { color: 'purple' },
            2: { color: 'blue' },
            3: { color: 'orange' }
        }
    };
    var chart = new google.visualization.PieChart(document.getElementById('njpiechart'));
        chart.draw(data, options);
    }

    function natdrawChart() {
        var data = google.visualization.arrayToDataTable([
            ['Vaccines', 'Amount'],
            ['Vaccines Completed', natVaccinationsCompleted],
            ['Vaccines Initiated', natVaccinationsInitiated],
            ['Vaccines Administered',  natVaccinesAdministered],
            ['Vaccines Distributed', natVaccinesDistributed]
        ]);
    var options = {
        title: 'National Vaccination Amounts',
        is3D: true,
        slices: {
            0: { color: 'green' },
            1: { color: 'purple' },
            2: { color: 'blue' },
            3: { color: 'orange' }
        }
    };
    var chart = new google.visualization.PieChart(document.getElementById('natpiechart'));
        chart.draw(data, options);
    }

    function njbarChart() {
        var data = google.visualization.arrayToDataTable([
            ['Occurances', 'Amount of People',],
            ['Cases', njTCases],
            ['Contact Tracers', njTContantTracers],
            ['Deaths', njTDeaths]
        ]);
        var options = {
            title: 'NJ Cases, Contact Tracers, and Deaths',
            chartArea: {width: '80%'},
            hAxis: {
                title: 'Total Population',
                minValue: 0
            },
            vAxis: {
                title: ''
            }
        };
        var chart = new google.visualization.BarChart(document.getElementById('njbarchart'));
        chart.draw(data, options);
    }
    
    function natbarChart() {
        var data = google.visualization.arrayToDataTable([
            ['Occurances', 'Amount of People',],
            ['Cases', natTCases],
            ['Contact Tracers', natTContantTracers],
            ['Deaths', natTDeaths]
        ]);
        var options = {
            title: 'National Cases, Contact Tracers, and Deaths',
            chartArea: {width: '80%'},
            hAxis: {
                title: 'Total Population',
                minValue: 0
            },
            vAxis: {
                title: ''
            }
        };
        var chart = new google.visualization.BarChart(document.getElementById('natbarchart'));
        chart.draw(data, options);
    }

    function njdonutchart() {
        var data = google.visualization.arrayToDataTable([
          ['Test', 'Result per Day'],
          ['Positive',     njPositiveTests],
          ['Negative',      njNegativeTests]
        ]);

        var options = {
          title: 'NJ Test Positivity Ratio',
          pieHole: 0.4,
          slices: {
            0: { color: 'red' },
            1: { color: 'green' }
          }
        };

        var chart = new google.visualization.PieChart(document.getElementById('njdonutchart'));
        chart.draw(data, options);
      }

      function natdonutchart() {
        var data = google.visualization.arrayToDataTable([
          ['Test', 'Result per Day'],
          ['Positive',     natPositiveTests],
          ['Negative',      natNegativeTests]
        ]);

        var options = {
          title: 'National Test Positivity Ratio',
          pieHole: 0.4,
          slices: {
            0: { color: 'red' },
            1: { color: 'green' }
          }
        };

        var chart = new google.visualization.PieChart(document.getElementById('natdonutchart'));
        chart.draw(data, options);
      }

    </script>

</body>

</html>